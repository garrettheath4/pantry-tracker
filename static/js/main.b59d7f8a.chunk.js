(this["webpackJsonppantry-tracker"]=this["webpackJsonppantry-tracker"]||[]).push([[0],{11:function(e,n,t){e.exports=t(24)},16:function(e,n,t){},23:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(9),c=t.n(o),i=(t(16),t(3)),u=t(5),s=t(4),l=t(2);function m(){console.log("Sending API request to update app");var e="/api/app/update?blocking=true";fetch(e).then((function(e){return console.log(e),e.text()})).then((function(n){n.includes("</html>")&&console.log("Warning:",e,"-> HTML response (expected OK).","Is the API not running?"),window.location.reload()})).catch((function(e){return console.log("Error: API request to update app failed.",e)}))}function f(){console.log("Sending API request to restart system");var e="/api/system/restart";fetch(e).then((function(e){return console.log(e),e.text()})).then((function(n){n.includes("</html>")&&console.log("Warning:",e,"-> HTML response (expected OK).","Is the API not running?")})).catch((function(e){return console.log("Error: API request to restart system failed.",e)}))}var d=t(10),p=t.n(d),h=t(7),v=t.n(h),b=function(e){return function(n){return n||e}},g=b(0),E=b(1),k=function(e){return Math.max(g(e),0)},w=function(e){return Math.round(10*(Number(e)+Number.EPSILON))/10},y=function(e){return function(n){return function(t){return a=e(g(t),E(n)),w(k(a));var a}}},N=y((function(e,n){return e+n})),x=y((function(e,n){return e-n})),I=function(e){var n=e.count,t=e.name;return r.a.createElement("span",{className:"pure-u-3-4 countNumber"},S(n)," ",A(t,n))},S=function(e){return"undefined"===typeof e?r.a.createElement(l.a,{icon:"spinner",pulse:!0}):null===e?"??":w(e)},A=function(e,n){return 1===n&&e.endsWith("s")?e.slice(0,-1):e},O=function(e){var n=e.onClickHandler,t=e.increments;return r.a.createElement("div",{className:"pure-u-1-8"},r.a.createElement("button",{className:"pure-button countButton",onClick:n},t?r.a.createElement(l.a,{size:"2x",icon:"plus"}):r.a.createElement(l.a,{size:"2x",icon:"minus"})))};var P=!1,C=function(e){var n=e.item,t=n.name,o=N(n.increment),c=x(n.decrement),u=Object(a.useState)(void 0),s=Object(i.a)(u,2),l=s[0],m=s[1],f=function(e,n){var t=Object(a.useState)(e),r=Object(i.a)(t,2),o=r[0],c=r[1];return Object(a.useEffect)((function(){var t=setTimeout((function(){c(e)}),n);return function(){clearTimeout(t)}}),[e,n]),o}(l,1500);Object(a.useEffect)((function(){!function(){var e;v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e="/api/item?name=".concat(t.toLowerCase()),n.next=3,v.a.awrap(fetch(e));case 3:n.sent.text().then((function(n){var a=Number(n);Number.isNaN(a)?(m(null),P||(P=!0,n.includes("</html>")?console.log("Warning:",e,"-> HTML response (expected a number).","Is the API not running?"):console.log("Warning: received very unexpected response from"," API while fetching ".concat(t.toLowerCase(),":"),n))):m(a)})).catch((function(e){m(null),console.log("Unable to fetch count for",t,".",e)}));case 5:case"end":return n.stop()}}))}()}),[t]),Object(a.useEffect)((function(){"undefined"!==typeof f&&null!==f&&function(e,n){var t=k(n),a="/api/item?name=".concat(e.toLowerCase(),"&count=").concat(t);fetch(a).then((function(e){return e.text()})).then((function(e){if(t!==Number(e)){var n=String(e);n.includes("</html>")?console.log("Warning:",a,"-> HTML response (expected ".concat(t,")")):(console.log("Warning: Did not receive expected response of",t,"from API"),console.log("Received:",n))}})).catch((function(e){return console.log("Unable to set item count through API",e)}))}(t,f)}),[f,t]);var d=function(e){return function(){return m(e(l))}};return r.a.createElement("div",{className:"pure-u-1-2 item"},r.a.createElement(O,{increments:!0,onClickHandler:d(o)}),r.a.createElement(I,{count:l,name:t}),r.a.createElement(O,{increments:!1,onClickHandler:d(c)}))};var H=function(e){var n=e.items;return r.a.createElement("div",{className:p()("pure-g","inventoryGrid",{inventoryGridSmall2:n.length<3,inventoryGridSmall3:3===n.length})},n.map((function(e){return r.a.createElement(C,{item:e,key:e.name})})))},j=[{name:"apples"},{name:"bananas"},{name:"oranges"},{name:"clementines"}],M=[{name:"tuna salad",increment:6},{name:"bread",increment:8},{name:"cheese",increment:10},{name:"lettuce",increment:16},{name:"mayonnaise",decrement:.1},{name:"tuna cans",increment:2},{name:"chopped veggies",increment:12},{name:"relish (backup)"},{name:"soylent Mocha drink"},{name:"soylent Mint Choc drink"},{name:"soylent Mocha powder",decrement:.1},{name:"soy milk",decrement:.1},{name:"chocolate syrup",decrement:.1},{name:"cereal",decrement:.1},{name:"coke (big)"},{name:"coke (small)"},{name:"coke Zero (small)"},{name:"steamable meals"},{name:"noodle bowls"},{name:"protein bars"},{name:"chip bags"},{name:"dairy milk",decrement:.1},{name:"peanut butter",decrement:.1}];t(23);u.b.add(s.a,s.b,s.d,s.e,s.c);var W=function(){var e=Object(a.useState)(!1),n=Object(i.a)(e,2),t=n[0],o=n[1];return r.a.createElement("div",{className:"App"},r.a.createElement("h2",{className:"inventoryHeader"},"Snack Item Tracker"),r.a.createElement("h5",{className:"inventorySubheader"},"Help us keep track of what snack items we have so we can know when to get more if we run low."),r.a.createElement(H,{items:j}),r.a.createElement("div",{className:"inventoryHeader"},r.a.createElement("button",{className:"subtleButton",onClick:m},t?"Pull & Build Server, then Refresh App (~1 minute)":r.a.createElement(l.a,{icon:"sync"})),r.a.createElement("button",{className:"subtleButton bold",onClick:function(){return o(!t)}},t?"Hide Garrett's items":"Show Garrett's items"),r.a.createElement("button",{className:"subtleButton",onClick:f},t?"Reboot server (possibly this device; ~2 minutes)":r.a.createElement(l.a,{icon:"power-off"}))),t&&r.a.createElement(H,{items:M}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.b59d7f8a.chunk.js.map